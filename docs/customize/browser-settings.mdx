---
title: "Browser Settings"
description: "Configure browser behavior and context settings"
icon: "globe"
---

Browser Use uses [playwright](https://playwright.dev/python/docs/api/class-browsertype#browser-type-launch-persistent-context) (or [patchright](https://github.com/Kaliiiiiiiiii-Vinyzu/patchright)) + CDP to manage its connection with a real browser.

```python
from browser_use import BrowserProfile, BrowserSession
````

- `BrowserSession(**params)` is Browser Use's object that tracks a connection to a running browser. It holds:
  - the live playwright, browser, browser_context, and page objects for the tabs the agent and human viewer are focues on
  - the helper methods to launch and connect to remote and local browsers
  - methods to interact with the browser window, apply config needed by the Agent, and run the DOMService for element detection
- `BrowserProfile(**params)` is Browser Use's object that holds a collection of static config kwargs, to be used when starting a `BrowserSession`. It holds:
  - all the standard playwright kwargs
  - some extra browser configuration options we provide on top of playwright (e.g. `allowed_domains`, `window_position`, `profile_directory`, `deterministic_rendering`, etc.)
  - some kwargs used to configure Browser Use-specific features related to the browser (e.g. `highlight_elements`, `disable_security`, `cookies_file`) 
- [`Browser`](https://playwright.dev/python/docs/api/class-browser): standard [playwright `Browser`](https://playwright.dev/python/docs/api/class-browser) object, refers to a running browser process (remote or local)
- [`BrowserContext`](https://playwright.dev/python/docs/api/class-browsercontext): standard [playwright `BrowserContext`](https://playwright.dev/python/docs/api/class-browsercontext) refers to a window in a live browser (incognito or with a profile)
- [`Page`](https://playwright.dev/python/docs/api/class-page): standard [playwright `Page`](https://playwright.dev/python/docs/api/class-page), the handle for one tab in the browser

<Note>
  The new `BrowserSession` and `BrowserProfile` classes now accept all the same arguments as standard Playwright [launch_persistent_context](https://playwright.dev/python/docs/api/class-browsertype#browser-type-launch-persistent-context) API, giving you full control over browser settings.
</Note>

# Browser Configuration

```python
from browser_use import Agent, BrowserSession, BrowserProfile

# It's easy to connect to or launch a new browser with a BrowserSession, many methods are supported:
browser_session = BrowserSession(
    # cdp_url='http://localhost:9222' | wss_url='ws://...', 
    # browser_pid=12445,
    # page=playwright_page | browser_context | browser | playwright,
    # executable_path='...', user_data_dir='...', headless=True,
    # keep_alive=True,
    # browser_profile=BrowserProfile(..., color_scheme='dark'),
    # color_scheme='light',  # <- will take precedence over ^
    # ... other config overrides can go here
)

# you can optionally start a session and use it outside an Agent, otherwise Agent will automatically start it
await session.start()

agent = Agent(
    task='your task here',
    browser_session=browser_session,
    # page=page                       # optional: provide a playwright page directly to the agent/session
)
```

`BrowserProfile` is a static, flat collection of all the config parameters used by a `BrowserSession`.
You can optionally use it to pass around and store a collection of config for a `BrowserSession`.

```python
browser_profile = BrowserProfile(
    headless=True,
    is_mobile=True,
    **playwright.devices['iPhone 13'],
    user_data_dir='~/Desktop/mobile_test_profile',
    allowed_domains=['https://*.example.com'],
)

# create a new session using the profile
browser_session = BrowserSession(
    browser_profile=browser_profile,
    headless=False, # <- extra kwargs passed to session will override values from profile
)

## `BrowserSession` Parameters

`BrowserSession` and `BrowserProfile` both accept the same long list of possible config kwargs, most are standard playwright arguments that `playwright.BrowserType.launch_persistent_context()` takes.

We also provide some extra utility options to control Browser-Use-specific features and make setup easier, 
e.g. `allowed_domains`, `keep_alive`, `highlight_elements`, and more.


### Remote Browser Connection Parameters

- **wss_url** (str | None, default: `None`)
  WSS URL of the node.js playwright browser server to connect to

- **cdp_url** (str | None, default: `None`)
  CDP URL of the browser to connect to (e.g., http://localhost:9222)

- **browser_pid** (int | None, default: `None`)
  PID of a running chromium-based browser process to connect to on localhost

<Note>
  For web scraping tasks on sites that restrict automated access, we recommend
  using [our cloud](https://browser-use.com) or an external browser provider for better reliability. 
  See the [Connect to your Browser](real-browser) guide for detailed connection instructions.
</Note>

### Runtime State / Parameters

- **browser_profile** (BrowserProfile, default: `BrowserProfile()`)
  BrowserProfile instance containing config to use for the BrowserSession

- **playwright** (Playwright | None, default: `None`)
  Optional playwright or patchright API client object to use
  result of (await async_playwright().start()) or (await async_patchright().start())

- **browser** (Browser | None, default: `None`)
  Playwright Browser object to use (optional)

- **browser_context** (BrowserContext | None, default: `None`)
  Playwright BrowserContext object to use (optional)

- **initialized** (bool, default: `False`)
  Mark BrowserSession as already initialized, skips launch/connection (not recommended)

- **page** *aka* **agent_current_page** (Page | None, default: `None`)
  Foreground Page that the agent is focused on, can also be passed as `page=...` as a shortcut.

- **human_current_page** (Page | None, default: `None`)
  Foreground Page that the human is focused on


## Browser-Use Parameters

These parameters control browser-use specific features, and are outside the standard playwright parameter set.

- **keep_alive** (bool | None, default: `None`)
  Keeps the browser alive after the agent has finished running. Useful for running multiple tasks with the same browser instance.

- **allowed_domains** (list[str] | None, default: `None`)
  List of allowed domains for navigation. If None, all domains are allowed.
  Example: `['google.com', '*.wikipedia.org']` - Here the agent will only be able to access `google.com` exactly and `wikipedia.org` + `*.wikipedia.org`.
  
  Glob patterns are supported:
  - `['example.com']` ✅ will match only `https://example.com/*` exactly, subdomains will not be allowed.
    It's always the most secure to list all the domains you want to give the access to explicitly w/ schemes e.g.
    `['*://google.com', 'http*://www.google.com', 'https://myaccount.google.com', 'https://mail.google.com', 'https://docs.google.com']`
  - `['*.example.com']` ⚠️ **CAUTION** this will match `https://example.com` and *all* its subdomains.
    Make sure *all* the subdomains are safe for the agent! `abc.example.com`, `def.example.com`, ..., `useruploads.example.com`, `admin.example.com`

- **disable_security** (bool, default: `False`)
  Completely disables all basic browser security features. Allows interacting across cross-site iFrames boundaries, but very INSECURE, don't visit untrusted URLs or use cookies.

- **deterministic_rendering** (bool, default: `False`)
  Enable deterministic rendering flags for consistent screenshots.

- **highlight_elements** (bool, default: `True`)
  Highlight interactive elements on the screen with colorful bounding boxes.

- **viewport_expansion** (int, default: `500`)
  Viewport expansion in pixels. With this you can control how much of the page is included in the context of the LLM:
  - `-1`: All elements from the entire page will be included, regardless of visibility (highest token usage but most complete).
  - `0`: Only elements which are currently visible in the viewport will be included.
  - `500` (default): Elements in the viewport plus an additional 500 pixels in each direction will be included, providing a balance between context and token usage.

- **include_dynamic_attributes** (bool, default: `True`)
  Include dynamic attributes in selectors for better element targeting.

- **minimum_wait_page_load_time** (float, default: `0.25`)
  Minimum time to wait before capturing page state for LLM input.

- **wait_for_network_idle_page_load_time** (float, default: `0.5`)
  Time to wait for network activity to cease. Increase to 3-5s for slower websites. This tracks essential content loading, not dynamic elements like videos.

- **maximum_wait_page_load_time** (float, default: `5.0`)
  Maximum time to wait for page load before proceeding.

- **wait_between_actions** (float, default: `0.5`)
  Time to wait between agent actions.

- **cookies_file** (str | None, default: `None`)
  File to save cookies to.

- **downloads_dir** (Path | str, default: `'~/.config/browseruse/downloads'`)
  Directory for downloads.

- **save_downloads_path** (str | None, default: `None`)
  Directory for saving downloads (alternative to downloads_dir).

- **profile_directory** (str, default: `'Default'`)
  Chrome profile directory name (e.g., 'Profile 1', 'Profile 2').

- **window_position** (dict | None, default: `{"width": 0, "height": 0}`)
  Window position from top-left corner.

---

## Playwright Parameters

https://playwright.dev/python/docs/api/class-browsertype#browser-type-launch-persistent-context

All the parameters below are standard playwright parameters and can be passed to both `BrowserSession` and `BrowserProfile`.
They are defined in `browser_use/browser/profile.py`.

### Launch Settings

- **headless** (bool | None, default: `None`)
  Runs the browser without a visible UI. If None, auto-detects based on display availability.

- **channel** (BrowserChannel, default: `'chromium'`)
  Browser channel: `'chromium'`, `'chrome'`, `'chrome-beta'`, `'chrome-dev'`, `'chrome-canary'`, `'msedge'`, `'msedge-beta'`, `'msedge-dev'`, `'msedge-canary'`

- **executable_path** (str | Path | None, default: `None`)
  Path to browser executable for custom installations.

- **user_data_dir** (str | Path | None, default: `'~/.config/browseruse/profiles/default'`)
  Directory for browser profile data. Set to None to use an ephemeral profile aka incognito mode.

- **args** (list[str], default: `[]`)
  Additional command-line arguments to pass to the browser.

- **ignore_default_args** (list[str] | bool, default: `['--enable-automation', '--disable-extensions']`)
  List of default CLI args to stop playwright from applying.

- **env** (dict[str, str], default: `{}`)
  Environment variables to set when launching browser.

- **chromium_sandbox** (bool, default: `not IN_DOCKER`)
  Whether to enable Chromium sandboxing (recommended unless inside Docker).

- **devtools** (bool, default: `False`)
  Whether to open DevTools panel automatically (only works when headless=False).

- **slow_mo** (float, default: `0`)
  Slow down actions by this many milliseconds.

- **timeout** (float, default: `30000`)
  Default timeout in milliseconds for connecting to a remote browser.

- **accept_downloads** (bool, default: `True`)
  Whether to automatically accept all downloads.

- **proxy** (dict | None, default: `None`)
  Proxy settings. Example: `{"server": "http://proxy.com:8080", "username": "user", "password": "pass"}`

- **permissions** (list[str], default: `['clipboard-read', 'clipboard-write', 'notifications']`)
  Browser permissions to grant.

- **storage_state** (str | Path | dict | None, default: `None`)
  Browser storage state (cookies, localStorage). Can be file path or dict.



### Playwright Timing Settings

These control how the browser waits for CDP API calls to complete and pages to load.

- **default_timeout** (float | None, default: `None`)
  Default timeout for Playwright operations in milliseconds.

- **default_navigation_timeout** (float | None, default: `None`)
  Default timeout for page navigation in milliseconds.


### Display and Viewport Settings

Configure browser window size, viewport, and display properties:

- **user_agent** (str | None, default: `None`)
  Specific user agent to use in this context.

- **is_mobile** (bool, default: `False`)
  Whether the meta viewport tag is taken into account and touch events are enabled.

- **has_touch** (bool, default: `False`)
  Specifies if viewport supports touch events.

- **geolocation** (dict | None, default: `None`)
  Geolocation coordinates. Example: `{"latitude": 59.95, "longitude": 30.31667}`

- **locale** (str | None, default: `None`)
  Specify user locale, for example en-GB, de-DE, etc. Locale will affect the navigator.language value, Accept-Language request header value as well as number and date formatting rules.

- **timezone_id** (str | None, default: `None`)
  Timezone identifier (e.g., 'America/New_York').

- **window_size** (dict | None, default: `None`)
  Browser window size for headful mode. Example: `{"width": 1920, "height": 1080}`

- **viewport** (dict | None, default: `None`)
  Viewport size with `width` and `height`. Example: `{"width": 1280, "height": 720}`

- **no_viewport** (bool | None, default: `None`)
  Disable fixed viewport. Content will resize with window.

- **device_scale_factor** (float | None, default: `None`)
  Device scale factor (DPI). Useful for high-resolution screenshots.

- **screen** (dict | None, default: `None`)
  Screen size available to browser. Auto-detected if not specified.

- **color_scheme** (ColorScheme, default: `'light'`)
  Preferred color scheme: `'light'`, `'dark'`, `'no-preference'`

- **contrast** (Contrast, default: `'no-preference'`)
  Contrast preference: `'no-preference'`, `'more'`, `'null'`

- **reduced_motion** (ReducedMotion, default: `'no-preference'`)
  Reduced motion preference: `'reduce'`, `'no-preference'`, `'null'`

- **forced_colors** (ForcedColors, default: `'none'`)
  Forced colors mode: `'active'`, `'none'`, `'null'`


### Security and Network Settings

> See `allowed_domains` above too!

- **offline** (bool, default: `False`)
  Emulate network being offline.

- **http_credentials** (dict | None, default: `None`)
  Credentials for HTTP authentication.

- **extra_http_headers** (dict[str, str], default: `{}`)
  Additional HTTP headers to be sent with every request.

- **ignore_https_errors** (bool, default: `False`)
  Whether to ignore HTTPS errors when sending network requests.

- **bypass_csp** (bool, default: `False`)
  Toggles bypassing Content-Security-Policy.

- **java_script_enabled** (bool, default: `True`)
  Whether or not to enable JavaScript in the context.

- **service_workers** (ServiceWorkers, default: `'allow'`)
  Whether to allow sites to register Service workers: `'allow'`, `'block'`

- **base_url** (str | None, default: `None`)
  Base URL to be used in `page.goto()` and similar operations.

- **strict_selectors** (bool, default: `False`)
  If true, selector passed to Playwright methods will throw if more than one element matches.

- **client_certificates** (list[ClientCertificate], default: `[]`)
  Client certificates to be used with requests.


### Recording and Debugging

- **save_recording_path** (str | None, default: `None`)
  Directory path for saving video recordings.

- **trace_path** (str | None, default: `None`)
  Directory path for saving trace files. Files are automatically named as `{trace_path}/{context_id}.zip`.

- **record_video_dir** (str | Path | None, default: `None`)
  Directory to save video recordings.

- **record_video_size** (dict | None, default: `None`)
  Video size. Example: `{"width": 1280, "height": 720}`

- **record_har_path** (str | Path | None, default: `None`)
  Path to save HAR file with network activity.

- **record_har_content** (RecordHarContent, default: `'embed'`)
  How to persist HAR content: `'omit'`, `'embed'`, `'attach'`

- **record_har_mode** (RecordHarMode, default: `'full'`)
  HAR recording mode: `'full'`, `'minimal'`

- **record_har_omit_content** (bool, default: `False`)
  Whether to omit request content from the HAR.

- **record_har_url_filter** (str | Pattern | None, default: `None`)
  URL filter for HAR recording.

- **downloads_path** (str | Path | None, default: `None`)
  Directory to save downloads to (used by launch args).

- **traces_dir** (str | Path | None, default: `None`)
  Directory to save HAR trace files to.

- **handle_sighup** (bool, default: `True`)
  Whether playwright should swallow SIGHUP signals and kill the browser.

- **handle_sigint** (bool, default: `False`)
  Whether playwright should swallow SIGINT signals and kill the browser.

- **handle_sigterm** (bool, default: `False`)
  Whether playwright should swallow SIGTERM signals and kill the browser.


---

## Example

```python
from browser_use import BrowserSession, BrowserProfile, Agent

browser_profile = BrowserProfile(
    headless=False,
    cookies_file="path/to/cookies.json",
    wait_for_network_idle_page_load_time=3.0,
    viewport={"width": 1280, "height": 1100},
    locale='en-US',
    user_agent='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36',
    highlight_elements=True,
    viewport_expansion=500,
    allowed_domains=['*.google.com', 'http*://*.wikipedia.org'],
)

browser_session = BrowserSession(
    headless=True,
    browser_profile=browser_profile,
)

# you can drive a session without the agent / reuse it between agents
await browser_session.start()
page = await browser_session.get_current_page()
await page.goto('https://example.com/first/page')

async def run_search():
    agent = Agent(
        task='Your task',
        llm=llm,
        page=page,                        # optional: pass a specific playwright page to start on
        browser_session=browser_session,  # optional: pass an existing browser session to an agent
    )
```

## Summary

- **BrowserSession** parameters (defined in `browser_use/browser/session.py`) handle connection and runtime state
- **BrowserProfile** parameters (defined in `browser_use/browser/profile.py`) handle all playwright configuration

`BrowserProfile` is a flat collection of config, it's consumed by these calls depending on how we need to connect/launch:

- `BrowserConnectArgs` - args for `playwright.BrowserType.connect_over_cdp(...)`
- `BrowserLaunchArgs` - args for `playwright.BrowserType.launch(...)`
- `BrowserNewContextArgs` - args for `playwright.BrowserType.new_context(...)`
- `BrowserLaunchPersistentContextArgs` - args for `playwright.BrowserType.launch_persistent_context(...)`
- BrowserUse custom settings

For more details on Playwright's browser context options, see the [official documentation](https://playwright.dev/python/docs/api/class-browsertype#browser-type-launch-persistent-context).

---

In the future we may add support for more browser driving methods:
- Chrome Extension bridge w/ `chrome.debugger` permissions, via relaey server
- Computer-Use x,y coordinate-type mouse & keyboard interaction driver
- `adb` Android debugger for controlling remote a Android browser / apps
- [Appium](https://github.com/appium/appium)-style accessibility UX drivers
- WebDriver-BiDi to extend CDP
- In-page JS as an AI assistant you can provide users on your site (like Intercom or analytics)
